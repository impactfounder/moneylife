<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ì—°ê¸ˆ ê³„ì‚°ê¸° - ì€í‡´ í›„ í•„ìš”í•œ ì—°ê¸ˆì•¡ì„ ê³„ì‚°í•˜ê³  êµ­ë¯¼ì—°ê¸ˆ, ê°œì¸ì—°ê¸ˆì„ í•©ë¦¬ì ìœ¼ë¡œ ì„¤ê³„í•˜ì„¸ìš”">
    <meta name="keywords" content="ì—°ê¸ˆê³„ì‚°ê¸°, êµ­ë¯¼ì—°ê¸ˆ, ê°œì¸ì—°ê¸ˆ, ë…¸í›„ì¤€ë¹„, ì€í‡´ì„¤ê³„, ì—°ê¸ˆìˆ˜ë ¹ì•¡">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://moneylife.kr/pension-calculator.html">
    <title>ì—°ê¸ˆ ê³„ì‚°ê¸° - ë…¸í›„ ì¤€ë¹„ ì‹œë®¬ë ˆì´ì…˜ | ê¸ˆìœµê³„ì‚°ê¸°</title>
    
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://moneylife.kr/pension-calculator.html">
    <meta property="og:title" content="ì—°ê¸ˆ ê³„ì‚°ê¸° - ë…¸í›„ ì¤€ë¹„ ì‹œë®¬ë ˆì´ì…˜">
    <meta property="og:description" content="ì€í‡´ í›„ í•„ìš”í•œ ì—°ê¸ˆì•¡ì„ ê³„ì‚°í•˜ê³  êµ­ë¯¼ì—°ê¸ˆ, ê°œì¸ì—°ê¸ˆì„ í•©ë¦¬ì ìœ¼ë¡œ ì„¤ê³„í•˜ì„¸ìš”">
    <meta property="og:site_name" content="ê¸ˆìœµê³„ì‚°ê¸°">
    
    <!-- êµ¬ì¡°í™”ëœ ë°ì´í„° -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "ì—°ê¸ˆ ê³„ì‚°ê¸°",
      "url": "https://moneylife.kr/pension-calculator.html",
      "applicationCategory": "FinanceApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "KRW"
      },
      "description": "ì€í‡´ í›„ í•„ìš”í•œ ì—°ê¸ˆì•¡ì„ ê³„ì‚°í•˜ê³  êµ­ë¯¼ì—°ê¸ˆ, ê°œì¸ì—°ê¸ˆì„ í•©ë¦¬ì ìœ¼ë¡œ ì„¤ê³„. ë…¸í›„ ì¤€ë¹„ë¥¼ ìœ„í•œ í•„ìˆ˜ ë„êµ¬ì…ë‹ˆë‹¤.",
      "featureList": ["ì—°ê¸ˆ ê³„ì‚°", "êµ­ë¯¼ì—°ê¸ˆ ê³„ì‚°", "ê°œì¸ì—°ê¸ˆ ì„¤ê³„", "ë…¸í›„ ìê¸ˆ ì‹œë®¬ë ˆì´ì…˜"]
    }
    </script>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2515762248094919"
     crossorigin="anonymous"></script>
    
    <link rel="stylesheet" href="css/common.css">
    <style>
        /* ğŸ”¥ ìµœìš°ì„  ìˆœìœ„: ëª¨ë°”ì¼ì—ì„œ í—¤ë” ì¦‰ì‹œ ìˆ¨ê¹€ (FOUC ë°©ì§€) */
        @media (max-width: 768px) {
            .header,
            header,
            .header-container,
            header nav,
            .mobile-menu-btn,
            .mobile-dropdown {
                display: none !important;
                visibility: hidden !important;
                opacity: 0 !important;
                height: 0 !important;
                overflow: hidden !important;
            }
            
            body {
                padding-top: 0 !important;
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MN9KGF64');</script>
    <!-- End Google Tag Manager -->
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MN9KGF64"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <header class="header">
        <div class="header-container">
            <a href="index.html" class="logo">
                <svg class="logo-icon" width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="4" y="2" width="16" height="20" rx="2" stroke="currentColor" stroke-width="2"/>
                    <line x1="8" y1="6" x2="16" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <circle cx="8" cy="10" r="0.75" fill="currentColor"/>
                    <circle cx="12" cy="10" r="0.75" fill="currentColor"/>
                    <circle cx="16" cy="10" r="0.75" fill="currentColor"/>
                    <circle cx="8" cy="13" r="0.75" fill="currentColor"/>
                    <circle cx="12" cy="13" r="0.75" fill="currentColor"/>
                    <circle cx="16" cy="13" r="0.75" fill="currentColor"/>
                    <circle cx="8" cy="16" r="0.75" fill="currentColor"/>
                    <circle cx="12" cy="16" r="0.75" fill="currentColor"/>
                    <circle cx="16" cy="16" r="0.75" fill="currentColor"/>
                    <rect x="8" y="18.5" width="8" height="1.5" rx="0.5" fill="currentColor"/>
                </svg>
                <span>ê¸ˆìœµê³„ì‚°ê¸°</span>
            </a>
            <nav>
                <ul class="nav-menu">
                    <li><a href="index.html">í™ˆ</a></li>
                    <li><a href="content/index.html">ì½˜í…ì¸ </a></li>
                    <li><a href="loan-calculator.html">ëŒ€ì¶œ</a></li>
                    <li><a href="salary-calculator.html">ê¸‰ì—¬</a></li>
                    <li><a href="compound-interest-calculator.html">ë³µë¦¬ì´ì</a></li>
                </ul>
                <button class="mobile-menu-btn">â˜°</button>
            </nav>
        </div>
    </header>

    <main class="container">
        <div class="page-header">
            <h1 class="page-title">ğŸ¯ ì—°ê¸ˆ ê³„ì‚°ê¸°</h1>
            <p class="page-subtitle">
                ì€í‡´ í›„ í•„ìš”í•œ ìƒí™œë¹„ì™€ ì—°ê¸ˆ ìˆ˜ë ¹ì•¡ì„ ê³„ì‚°í•˜ì—¬ ë…¸í›„ë¥¼ ì¤€ë¹„í•˜ì„¸ìš”.
            </p>
        </div>

        <div class="layout-grid">
            <div class="main-content">
                <div class="card">
                    <h2 style="margin-bottom: 1.5rem; font-size: 1.5rem;">ë…¸í›„ ì„¤ê³„ ì •ë³´</h2>
                    
                    <form id="pensionForm">
                        <div class="form-group">
                            <label class="form-label" for="currentAge">í˜„ì¬ ë‚˜ì´</label>
                            <input type="number" id="currentAge" class="form-input" 
                                   placeholder="ì˜ˆ: 35" value="35" min="20" max="100" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="retirementAge">ì€í‡´ í¬ë§ ë‚˜ì´</label>
                            <input type="number" id="retirementAge" class="form-input" 
                                   placeholder="ì˜ˆ: 65" value="65" min="40" max="100" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="lifeExpectancy">ê¸°ëŒ€ ìˆ˜ëª…</label>
                            <input type="number" id="lifeExpectancy" class="form-input" 
                                   placeholder="ì˜ˆ: 90" value="90" min="60" max="120" required>
                            <small style="color: var(--text-secondary); display: block; margin-top: 0.25rem;">
                                í•œêµ­ì¸ í‰ê·  ê¸°ëŒ€ìˆ˜ëª…: ë‚¨ì„± 80ì„¸, ì—¬ì„± 86ì„¸
                            </small>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="monthlyExpense">ì›” í¬ë§ ìƒí™œë¹„ (ì€í‡´ í›„)</label>
                            <div class="input-unit" data-unit="ì›">
                                <input type="text" id="monthlyExpense" class="form-input" 
                                       placeholder="ì˜ˆ: 3,000,000" value="3,000,000" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="nationalPension">ì˜ˆìƒ êµ­ë¯¼ì—°ê¸ˆ (ì›”)</label>
                            <div class="input-unit" data-unit="ì›">
                                <input type="text" id="nationalPension" class="form-input" 
                                       placeholder="ì˜ˆ: 1,000,000" value="1,000,000" required>
                            </div>
                            <small style="color: var(--text-secondary); display: block; margin-top: 0.25rem;">
                                2025ë…„ í‰ê·  êµ­ë¯¼ì—°ê¸ˆ ìˆ˜ë ¹ì•¡: ì•½ 64ë§Œì› (êµ­ë¯¼ì—°ê¸ˆê³µë‹¨ í†µê³„)
                            </small>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="currentSavings">í˜„ì¬ ë…¸í›„ ìê¸ˆ</label>
                            <div class="input-unit" data-unit="ì›">
                                <input type="text" id="currentSavings" class="form-input" 
                                       placeholder="ì˜ˆ: 50,000,000" value="50,000,000" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="monthlyContribution">ì›” ì ë¦½ ê¸ˆì•¡</label>
                            <div class="input-unit" data-unit="ì›">
                                <input type="text" id="monthlyContribution" class="form-input" 
                                       placeholder="ì˜ˆ: 500,000" value="500,000" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="expectedReturn">ì˜ˆìƒ ì—° ìˆ˜ìµë¥  (%)</label>
                            <input type="number" id="expectedReturn" class="form-input" 
                                   placeholder="ì˜ˆ: 4" value="4" step="0.1" min="0" max="20" required>
                        </div>

                        <button type="submit" class="btn btn-primary btn-block">ê³„ì‚°í•˜ê¸°</button>
                    </form>
                </div>

                <div id="resultSection" class="hidden">
                    <div class="result-card">
                        <div id="mainResult"></div>
                    </div>

                    <div class="card mt-4">
                        <h3 style="margin-bottom: 1.5rem; font-size: 1.25rem;">ë…¸í›„ ìê¸ˆ ë¶„ì„</h3>
                        <div id="detailResult"></div>
                    </div>

                    <div class="card mt-4">
                        <h3 style="margin-bottom: 1.5rem; font-size: 1.25rem;">ìì‚° ì¦ê°€ ë° ì†Œì§„ ì¶”ì´</h3>
                        <div style="height: 400px;">
                            <canvas id="pensionChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <aside class="sidebar">
                <div class="card">
                    <h3 style="margin-bottom: 1rem; font-size: 1.125rem;">ê´€ë ¨ ê³„ì‚°ê¸°</h3>
                    <ul style="list-style: none;">
                        <li style="margin-bottom: 0.75rem;">
                            <a href="compound-interest-calculator.html" style="color: var(--primary-color); text-decoration: none;">
                                ğŸ“ˆ ë³µë¦¬ì´ì
                            </a>
                        </li>
                        <li style="margin-bottom: 0.75rem;">
                            <a href="severance-calculator.html" style="color: var(--primary-color); text-decoration: none;">
                                ğŸ í‡´ì§ê¸ˆ ê³„ì‚°ê¸°
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="card mt-3" style="background: #fef3c7;">
                    <h3 style="margin-bottom: 1rem; font-size: 1.125rem; color: #92400e;">ğŸ’¡ ë…¸í›„ ì¤€ë¹„ íŒ</h3>
                    <ul style="color: #92400e; font-size: 0.875rem; line-height: 1.8; padding-left: 1.2rem;">
                        <li>ê°€ëŠ¥í•œ í•œ ì¼ì° ì‹œì‘í•˜ì„¸ìš”</li>
                        <li>ë‹¤ì–‘í•œ ì—°ê¸ˆ ìƒí’ˆì„ í™œìš©í•˜ì„¸ìš”</li>
                        <li>ì¸í”Œë ˆì´ì…˜ì„ ê³ ë ¤í•˜ì„¸ìš”</li>
                        <li>ì˜ë£Œë¹„ ì˜ˆë¹„ìê¸ˆë„ ì¤€ë¹„í•˜ì„¸ìš”</li>
                    </ul>
                </div>
            </aside>
        </div>

        <section class="card mt-4">
            <h2 style="font-size: 1.75rem; margin-bottom: 1rem;">ì—°ê¸ˆ ê³„ì‚°ê¸° ê°€ì´ë“œ</h2>
            
            <h3 style="font-size: 1.25rem; margin-top: 1.5rem; margin-bottom: 0.75rem;">ë…¸í›„ ì¤€ë¹„, ì–¼ë§ˆë‚˜ í•„ìš”í• ê¹Œ?</h3>
            <p style="line-height: 1.8; color: var(--text-secondary);">
                ì¼ë°˜ì ìœ¼ë¡œ ì€í‡´ í›„ í˜„ì—­ ì‹œì ˆ ì†Œë“ì˜ 70~80% ìˆ˜ì¤€ì˜ ìƒí™œë¹„ê°€ í•„ìš”í•˜ë‹¤ê³  í•©ë‹ˆë‹¤.
                ë¬¼ê°€ ìƒìŠ¹ë¥ (ì¸í”Œë ˆì´ì…˜)ì„ ê³ ë ¤í•˜ë©´ ì‹¤ì œë¡œëŠ” ë” ë§ì€ ê¸ˆì•¡ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>

            <h3 style="font-size: 1.25rem; margin-top: 1.5rem; margin-bottom: 0.75rem;">3ì¸µ ì—°ê¸ˆ ì‹œìŠ¤í…œ <span style="font-size: 0.875rem; color: var(--text-secondary); font-weight: 400;">(2025ë…„ ê¸°ì¤€)</span></h3>
            <p style="line-height: 1.8; color: var(--text-secondary);">
                <strong>1ì¸µ:</strong> êµ­ë¯¼ì—°ê¸ˆ (ê³µì  ì—°ê¸ˆ) - 2025ë…„ í‰ê·  ìˆ˜ë ¹ì•¡ ì•½ 64ë§Œì›<br>
                <strong>2ì¸µ:</strong> í‡´ì§ì—°ê¸ˆ (DCí˜•, DBí˜•) - ê·¼ë¡œìí‡´ì§ê¸‰ì—¬ë³´ì¥ë²•<br>
                <strong>3ì¸µ:</strong> ê°œì¸ì—°ê¸ˆ (ì—°ê¸ˆì €ì¶•, IRP ë“±) - ì„¸ì•¡ê³µì œ ìµœëŒ€ ì—° 900ë§Œì›<br><br>
                ì„¸ ê°€ì§€ë¥¼ ëª¨ë‘ í™œìš©í•˜ì—¬ ì•ˆì •ì ì¸ ë…¸í›„ë¥¼ ì¤€ë¹„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
            </p>

            <h3 style="font-size: 1.25rem; margin-top: 1.5rem; margin-bottom: 0.75rem;">ì—°ê¸ˆ ì¤€ë¹„ ì‹œ ê³ ë ¤ì‚¬í•­</h3>
            <ul style="line-height: 1.8; color: var(--text-secondary); padding-left: 1.5rem;">
                <li>ì¡°ê¸° ì€í‡´ë¥¼ ì›í•œë‹¤ë©´ ë” ë§ì€ ì¤€ë¹„ê°€ í•„ìš”í•©ë‹ˆë‹¤</li>
                <li>ì˜ë£Œë¹„, ì£¼ê±°ë¹„ ë“± ì¶”ê°€ ë¹„ìš©ì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤</li>
                <li>ì¸í”Œë ˆì´ì…˜ìœ¼ë¡œ í™”í ê°€ì¹˜ê°€ í•˜ë½í•©ë‹ˆë‹¤</li>
                <li>ê±´ê°• ìƒíƒœì™€ ê°€ì¡± ìƒí™©ì„ ê³ ë ¤í•˜ì„¸ìš”</li>
            </ul>

            <div style="margin-top: 2rem; padding: 1rem; background: var(--bg-light); border-left: 4px solid var(--primary-color); border-radius: 4px;">
                <h4 style="font-size: 1rem; margin-bottom: 0.5rem; color: var(--text-primary);">ğŸ“š ì°¸ê³ ìë£Œ</h4>
                <ul style="font-size: 0.875rem; color: var(--text-secondary); line-height: 1.6; padding-left: 1.2rem;">
                    <li>êµ­ë¯¼ì—°ê¸ˆê³µë‹¨ - <a href="https://www.nps.or.kr" target="_blank" rel="noopener" style="color: var(--primary-color);">êµ­ë¯¼ì—°ê¸ˆ ìˆ˜ë ¹ì•¡ ì¡°íšŒ (2025ë…„ í‰ê·  64ë§Œì›)</a></li>
                    <li>ê¸ˆìœµê°ë…ì› - <a href="https://www.fss.or.kr" target="_blank" rel="noopener" style="color: var(--primary-color);">ì—°ê¸ˆì €ì¶• ê°€ì´ë“œ</a></li>
                    <li>í‡´ì§ì—°ê¸ˆì¢…í•©ì•ˆë‚´ - <a href="https://pension.fss.or.kr" target="_blank" rel="noopener" style="color: var(--primary-color);">í‡´ì§ì—°ê¸ˆ ì •ë³´</a></li>
                    <li>ë³´ê±´ë³µì§€ë¶€ - <a href="https://www.mohw.go.kr" target="_blank" rel="noopener" style="color: var(--primary-color);">ë…¸í›„ì¤€ë¹„ ì •ì±…</a></li>
                </ul>
                <p style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.75rem; font-style: italic;">
                    * ë³¸ ê³„ì‚°ê¸°ëŠ” 2025ë…„ ê¸°ì¤€ ì—°ê¸ˆì œë„ë¥¼ ë°˜ì˜í•˜ì˜€ìŠµë‹ˆë‹¤. êµ­ë¯¼ì—°ê¸ˆ ìˆ˜ë ¹ì•¡ì€ ê°€ì…ê¸°ê°„ ë° ì†Œë“ì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤.
                </p>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>ê¸ˆìœµ ê³„ì‚°ê¸°</h3>
                    <p style="color: rgba(255,255,255,0.8); margin-top: 0.5rem;">
                        ìŠ¤ë§ˆíŠ¸í•œ ì¬ë¬´ ì„¤ê³„ë¥¼ ìœ„í•œ<br>
                        ë¬´ë£Œ ê¸ˆìœµ ê³„ì‚° ì„œë¹„ìŠ¤
                    </p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 ê¸ˆìœµê³„ì‚°ê¸°. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- ëª¨ë°”ì¼ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°” (ì•± ìŠ¤íƒ€ì¼) -->
    <nav class="mobile-bottom-nav" aria-label="ëª¨ë°”ì¼ ë©”ì¸ ë©”ë‰´">
        <a href="index.html" class="nav-item" aria-label="í™ˆ">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
            <div class="nav-label">í™ˆ</div>
        </a>
        <a href="calculators.html" class="nav-item active" aria-label="ê³„ì‚°ê¸°">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="4" y="2" width="16" height="20" rx="2"></rect>
                <line x1="8" y1="6" x2="16" y2="6"></line>
                <line x1="8" y1="10" x2="16" y2="10"></line>
                <line x1="8" y1="14" x2="16" y2="14"></line>
                <line x1="8" y1="18" x2="16" y2="18"></line>
            </svg>
            <div class="nav-label">ê³„ì‚°ê¸°</div>
        </a>
        <a href="content/index.html" class="nav-item" aria-label="ì½˜í…ì¸ ">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
            </svg>
            <div class="nav-label">ì½˜í…ì¸ </div>
        </a>
    </nav>
    
    <script src="js/common.js"></script>
    <script>
        // í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ í™œì„±í™” ìƒíƒœ ìë™ ì„¤ì •
        (function() {
            const pathname = window.location.pathname;
            const filename = pathname.split('/').pop() || 'index.html';
            
            console.log('ğŸ“ í˜„ì¬ í˜ì´ì§€:', pathname, 'íŒŒì¼ëª…:', filename);
            
            const navItems = document.querySelectorAll('.mobile-bottom-nav .nav-item');
            
            navItems.forEach(item => {
                item.classList.remove('active');
                const href = item.getAttribute('href');
                
                if ((filename === 'index.html' || filename === '' || pathname === '/') && 
                    !pathname.includes('/content/') &&
                    (href === 'index.html' || href === '/' || href === '../index.html')) {
                    item.classList.add('active');
                    console.log('âœ… í™ˆ í™œì„±í™”');
                }
                else if ((filename === 'calculators.html' || filename.includes('calculator') || filename.includes('rank')) && 
                         href === 'calculators.html') {
                    item.classList.add('active');
                    console.log('âœ… ê³„ì‚°ê¸° í™œì„±í™”');
                }
                else if (pathname.includes('/content/') && href.includes('content/index.html')) {
                    item.classList.add('active');
                    console.log('âœ… ì½˜í…ì¸  í™œì„±í™”');
                }
            });
        })();
    </script>
    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ í†µê³„ ê¸°ë¡
        document.addEventListener('DOMContentLoaded', function() {
            trackCalculatorUsage('pension');
        });

        let pensionChart = null;

        setupNumberInputs(['monthlyExpense', 'nationalPension', 'currentSavings', 'monthlyContribution']);

        document.getElementById('pensionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            calculatePension();
        });

        function calculatePension() {
            const currentAge = parseInt(document.getElementById('currentAge').value);
            const retirementAge = parseInt(document.getElementById('retirementAge').value);
            const lifeExpectancy = parseInt(document.getElementById('lifeExpectancy').value);
            const monthlyExpense = parseNumber(document.getElementById('monthlyExpense').value);
            const nationalPension = parseNumber(document.getElementById('nationalPension').value);
            const currentSavings = parseNumber(document.getElementById('currentSavings').value);
            const monthlyContribution = parseNumber(document.getElementById('monthlyContribution').value);
            const expectedReturn = parseFloat(document.getElementById('expectedReturn').value);

            if (retirementAge <= currentAge) {
                alert('ì€í‡´ ë‚˜ì´ëŠ” í˜„ì¬ ë‚˜ì´ë³´ë‹¤ ì»¤ì•¼ í•©ë‹ˆë‹¤.');
                return;
            }

            if (lifeExpectancy <= retirementAge) {
                alert('ê¸°ëŒ€ ìˆ˜ëª…ì€ ì€í‡´ ë‚˜ì´ë³´ë‹¤ ì»¤ì•¼ í•©ë‹ˆë‹¤.');
                return;
            }

            // ì€í‡´ê¹Œì§€ ê¸°ê°„
            const yearsToRetirement = retirementAge - currentAge;
            const monthsToRetirement = yearsToRetirement * 12;

            // ì€í‡´ ì‹œì ì˜ ìì‚° ê³„ì‚° (ë³µë¦¬)
            const monthlyRate = expectedReturn / 100 / 12;
            let retirementSavings = currentSavings;

            for (let i = 0; i < monthsToRetirement; i++) {
                retirementSavings = retirementSavings * (1 + monthlyRate) + monthlyContribution;
            }

            // ì€í‡´ í›„ ê¸°ê°„
            const retirementYears = lifeExpectancy - retirementAge;
            const retirementMonths = retirementYears * 12;

            // ì›”ë³„ ë¶€ì¡±ì•¡ (ìƒí™œë¹„ - êµ­ë¯¼ì—°ê¸ˆ)
            const monthlyShortfall = monthlyExpense - nationalPension;

            // ì´ í•„ìš” ê¸ˆì•¡
            const totalNeeded = monthlyShortfall * retirementMonths;

            // ë¶€ì¡±/ì—¬ìœ  ê¸ˆì•¡
            const surplus = retirementSavings - totalNeeded;

            // ì—°ê¸ˆìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆëŠ” ì›” ê¸ˆì•¡
            const monthlyPensionFromSavings = retirementSavings / retirementMonths;
            const totalMonthlyPension = monthlyPensionFromSavings + nationalPension;

            // ì°¨íŠ¸ ë°ì´í„° ìƒì„±
            const chartData = generateChartData(
                currentAge, retirementAge, lifeExpectancy,
                currentSavings, monthlyContribution, monthlyRate,
                monthlyShortfall
            );

            displayResults({
                retirementSavings,
                totalNeeded,
                surplus,
                monthlyPensionFromSavings,
                totalMonthlyPension,
                nationalPension,
                monthlyExpense,
                yearsToRetirement,
                retirementYears,
                chartData
            });

            document.getElementById('resultSection').classList.remove('hidden');

            // ê³„ì‚° ì™„ë£Œ í†µê³„ ê¸°ë¡
            trackCalculation('pension');
        }

        function generateChartData(currentAge, retirementAge, lifeExpectancy, 
                                   currentSavings, monthlyContribution, monthlyRate, monthlyShortfall) {
            const data = [];
            let age = currentAge;
            let savings = currentSavings;

            // ì€í‡´ ì „ (ìì‚° ì¦ê°€)
            while (age < retirementAge) {
                data.push({ age, savings });
                for (let i = 0; i < 12; i++) {
                    savings = savings * (1 + monthlyRate) + monthlyContribution;
                }
                age++;
            }

            // ì€í‡´ í›„ (ìì‚° ì†Œì§„)
            while (age <= lifeExpectancy) {
                data.push({ age, savings });
                savings -= monthlyShortfall * 12;
                if (savings < 0) savings = 0;
                age++;
            }

            return data;
        }

        function displayResults(data) {
            let statusColor = data.surplus >= 0 ? '#10b981' : '#ef4444';
            let statusText = data.surplus >= 0 ? 'ëª©í‘œ ë‹¬ì„± ê°€ëŠ¥' : 'ì¶”ê°€ ì¤€ë¹„ í•„ìš”';

            const mainHTML = `
                <div class="result-title">ì€í‡´ ì‹œì  ì˜ˆìƒ ìì‚°</div>
                <div class="result-value">${formatCurrency(data.retirementSavings)}</div>
                <div class="result-detail">
                    <div class="result-detail-item">
                        <span>ì´ í•„ìš” ê¸ˆì•¡</span>
                        <strong>${formatCurrency(data.totalNeeded)}</strong>
                    </div>
                    <div class="result-detail-item">
                        <span>ë¶€ì¡±/ì—¬ìœ  ê¸ˆì•¡</span>
                        <strong style="color: ${statusColor};">${formatCurrency(Math.abs(data.surplus))}</strong>
                    </div>
                    <div class="result-detail-item">
                        <span>ìƒíƒœ</span>
                        <strong style="color: ${statusColor};">${statusText}</strong>
                    </div>
                </div>
            `;
            document.getElementById('mainResult').innerHTML = mainHTML;

            const detailHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                    <div style="text-align: center; padding: 1.5rem; background: var(--bg-light); border-radius: 8px;">
                        <div style="color: var(--text-secondary); margin-bottom: 0.5rem;">ì˜ˆìƒ ì´ ì›”ì—°ê¸ˆ</div>
                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary-color);">
                            ${formatCurrency(data.totalMonthlyPension)}
                        </div>
                        <div style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 0.5rem;">
                            êµ­ë¯¼ì—°ê¸ˆ ${formatCurrency(data.nationalPension)}<br>
                            + ê°œì¸ìì‚° ${formatCurrency(data.monthlyPensionFromSavings)}
                        </div>
                    </div>
                    <div style="text-align: center; padding: 1.5rem; background: var(--bg-light); border-radius: 8px;">
                        <div style="color: var(--text-secondary); margin-bottom: 0.5rem;">ì€í‡´ê¹Œì§€ ê¸°ê°„</div>
                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary-color);">
                            ${data.yearsToRetirement}ë…„
                        </div>
                    </div>
                    <div style="text-align: center; padding: 1.5rem; background: var(--bg-light); border-radius: 8px;">
                        <div style="color: var(--text-secondary); margin-bottom: 0.5rem;">ì€í‡´ í›„ ê¸°ê°„</div>
                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary-color);">
                            ${data.retirementYears}ë…„
                        </div>
                    </div>
                </div>

                <div style="background: ${data.surplus >= 0 ? '#ecfdf5' : '#fef2f2'}; border-radius: 8px; padding: 1.5rem;">
                    <h4 style="margin-bottom: 1rem; color: ${statusColor};">ğŸ’¡ ë¶„ì„ ê²°ê³¼</h4>
                    <p style="line-height: 1.8; color: var(--text-secondary);">
                        ${data.surplus >= 0 
                            ? `í˜„ì¬ ê³„íšëŒ€ë¡œë¼ë©´ ì€í‡´ í›„ ${data.retirementYears}ë…„ ë™ì•ˆ ì›” ${formatCurrency(data.monthlyExpense)}ì˜ ìƒí™œë¹„ë¥¼ ì¶©ë‹¹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ìœ ë¶„ ${formatCurrency(data.surplus)}ì€ ë¹„ìƒ ìê¸ˆìœ¼ë¡œ í™œìš©í•˜ì„¸ìš”.`
                            : `í˜„ì¬ ê³„íšìœ¼ë¡œëŠ” ${formatCurrency(Math.abs(data.surplus))}ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. ì›” ì ë¦½ê¸ˆì„ ëŠ˜ë¦¬ê±°ë‚˜ ì€í‡´ ì‹œê¸°ë¥¼ ëŠ¦ì¶”ê±°ë‚˜ ì€í‡´ í›„ ìƒí™œë¹„ë¥¼ ì¤„ì´ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì„¸ìš”.`
                        }
                    </p>
                </div>
            `;
            document.getElementById('detailResult').innerHTML = detailHTML;

            drawChart(data.chartData);
        }

        function drawChart(chartData) {
            if (pensionChart) pensionChart.destroy();

            const labels = chartData.map(d => `${d.age}ì„¸`);
            const savings = chartData.map(d => d.savings);

            const ctx = document.getElementById('pensionChart');
            pensionChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'ì˜ˆìƒ ìì‚°',
                        data: savings,
                        borderColor: '#2563eb',
                        backgroundColor: 'rgba(37, 99, 235, 0.1)',
                        borderWidth: 3,
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'ìì‚°: ' + formatCurrency(context.parsed.y);
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatNumber(value);
                                }
                            }
                        }
                    }
                }
            });
        }

        window.addEventListener('load', function() {
            calculatePension();
        });
    </script>
</body>
</html>
